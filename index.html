 <!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Démo Bot Vocal IA E-commerce</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- SwiperJS CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
  <link rel="stylesheet" href="style.css">
  <!-- DOMPurify pour le bot -->
  <script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.0/dist/purify.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #181e36 0%, #4349a1 100%);
      margin: 0;
      color: #fff;
    }
    .hero {
      text-align: center;
      padding: 38px 0 24px 0;
      background: none;
      box-shadow: none;
    }
    .hero h1 {
      font-size: 2.1em;
      margin-bottom: 14px;
      letter-spacing: -1px;
    }
    .swiper {
      width: 98vw;
      max-width: 900px;
      margin: 0 auto 24px auto;
      border-radius: 18px;
      box-shadow: 0 4px 32px #14192d33;
      background: #fff;
      padding: 32px 0 10px 0;
    }
    .swiper-slide {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: #fff;
      border-radius: 16px;
      min-height: 370px;
    }
    .demo-img {
      width: 94%;
      max-width: 580px;
      height: 280px;
      object-fit: cover;
      border-radius: 14px;
      margin-bottom: 20px;
      box-shadow: 0 4px 18px #14192d19;
      border: 1px solid #f1f3ff;
    }
    .slide-title {
      font-size: 1.24em;
      color: #4349a1;
      font-weight: bold;
      margin-bottom: 8px;
    }
    .slide-desc {
      color: #333;
      font-size: 1em;
      margin-bottom: 10px;
      opacity: 0.85;
    }
    .swiper-pagination-bullet {
      background: #4349a1;
      opacity: 0.55;
    }
    .swiper-pagination-bullet-active {
      background: #5a61f2;
      opacity: 1;
    }
    .offers {
      background: rgba(255,255,255,0.09);
      border-radius: 36px 36px 0 0;
      padding: 36px 12px 80px 12px;
      margin-top: 20px;
      text-align: center;
    }
    .offers h2 {
      margin-bottom: 28px;
      color: #fff;
      font-size: 2em;
      letter-spacing: -1px;
    }
    .offer-cards {
      display: flex;
      gap: 22px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 22px;
    }
    .offer {
      background: #184588;
      border-radius: 16px;
      padding: 24px 30px;
      min-width: 220px;
      max-width: 300px;
      box-shadow: 0 1px 14px #282d4257;
      color: #fff;
      margin-bottom: 14px;
    }
    .offer h3 { color: #c9ddfc; margin-bottom: 13px;}
    .offer ul { padding-left: 16px; margin: 0 0 13px 0; }
    .offer li { margin-bottom: 6px; font-size: 1.03em; }
    .price { color: #e2feff; font-size: 1.3em; font-weight: bold; margin-bottom: 0;}
    .contact-btn {
      display: block; margin: 36px auto 0 auto;
      background: #ff5e36; color: #fff;
      font-size: 1.15em; border: none; border-radius: 28px;
      padding: 12px 30px; cursor: pointer; box-shadow: 0 2px 14px #23275036;
      transition: background 0.18s;
    }
    .contact-btn:hover { background: #df370c; }
    @media (max-width: 900px) {
      .swiper { width: 99vw; }
      .demo-img { height: 170px; }
    }
    @media (max-width: 640px) {
      .offers { padding: 18px 5px; }
      .offer-cards { flex-direction: column; align-items: center; gap: 14px;}
      .offer { max-width: 96vw; }
      .hero { padding: 12px 0 4px 0; }
    }
    .benefits {
      display: flex;
      gap: 32px;
      justify-content: center;
      margin: 32px auto 0 auto;
      max-width: 950px;
      background: rgba(255,255,255,0.07);
      border-radius: 22px;
      padding: 18px 8px;
      box-shadow: 0 2px 12px #1113a22a;
    }
    .benefit-item {
      display: flex; flex-direction: column; align-items: center;
      min-width: 110px;
    }
    .benefit-icon {
      width: 36px; height: 36px; margin-bottom: 7px;
      background: #fff; border-radius: 50%; box-shadow: 0 1px 5px #242a5222;
    }
    .benefit-item span {
      color: #fff;
      font-size: 1.08em;
      font-weight: bold;
      text-align: center;
      margin-top: 4px;
    }
    .footer {
      background: rgba(30,30,40,0.86);
      color: #cfd6ff;
      text-align: center;
      padding: 28px 0 8px 0;
      font-size: 1em;
      margin-top: 56px;
      border-radius: 26px 26px 0 0;
      box-shadow: 0 -2px 18px #161a3246;
    }
    .footer-content {
      display: flex; flex-direction: column; gap: 5px; align-items: center; justify-content: center;
    }
    .footer a { color: #66edfa; text-decoration: none; font-weight: bold;}
    .footer a:hover { text-decoration: underline;}
    .footer-made { color: #f980a2; margin-top: 2px; font-size: 0.97em; }
  </style>
</head>
<body>
  <!-- HERO + SLIDER DEMOS -->
  <section class="hero">
    <h1>Découvrez le bot vocal IA sur n'importe quel site</h1>
    <p class="hero-desc">Testez-le sur plusieurs univers : maquillage, coaching, meubles…<br>
      <span class="hero-highlight">Le bot qui transforme chaque visiteur en client.</span>
    </p>
    <!-- CARROUSEL SWIPER DEMOS -->
    <div class="swiper">
      <div class="swiper-wrapper">
        <!-- Slide 1 : Maquillage -->
        <div class="swiper-slide">
          <img class="demo-img" src="img/demo-maquillage.jpg" alt="Démo site maquillage">
          <div class="slide-title">Site de Maquillage</div>
          <div class="slide-desc">Le bot conseille la cliente sur les produits selon son type de peau, répond en vocal, et booste la conversion.</div>
        </div>
        <!-- Slide 2 : Coaching sportif -->
        <div class="swiper-slide">
          <img class="demo-img" src="img/demo-coaching.jpg" alt="Démo site coaching">
          <div class="slide-title">Coaching Sportif</div>
          <div class="slide-desc">Le bot prend les RDV, répond en vocal, explique les offres et capte tous les leads pour le coach.</div>
        </div>
        <!-- Slide 3 : E-commerce meubles -->
        <div class="swiper-slide">
          <img class="demo-img" src="img/demo-meubles.jpg" alt="Démo e-commerce meubles">
          <div class="slide-title">E-commerce de Meubles</div>
          <div class="slide-desc">Le bot guide le client, recommande le bon meuble, et fait la FAQ vocale comme un vendeur en boutique.</div>
        </div>
      </div>
      <div class="swiper-pagination"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
    </div>
  </section>

  <!-- SECTION BÉNÉFICES CLIENT -->
  <section class="benefits">
    <div class="benefit-item">
      <img src="img/clock.svg" alt="24/7" class="benefit-icon"/>
      <span>Disponible 24/7</span>
    </div>
    <div class="benefit-item">
      <img src="img/conversion.svg" alt="Conversion" class="benefit-icon"/>
      <span>Conversion +20%</span>
    </div>
    <div class="benefit-item">
      <img src="img/rocket.svg" alt="Rapide" class="benefit-icon"/>
      <span>Intégration <br>en 5 minutes</span>
    </div>
    <div class="benefit-item">
      <img src="img/support.svg" alt="Support" class="benefit-icon"/>
      <span>Support premium inclus</span>
    </div>
  </section>

  <!-- FORMULAIRE DE CRÉATION DE CONFIG -->
  <section class="config-form">
    <h2>Créer ma configuration</h2>
    <!-- ======= FORMULAIRE PRO (remplace l'ancien) ======= -->
    <form id="configForm" autocomplete="off" style="max-width:460px;margin:0 auto;display:flex;flex-direction:column;gap:16px;padding:30px 18px;background:#fff4;border-radius:18px;box-shadow:0 2px 18px #181e3627">
      <label>Nom du site*
        <input type="text" name="name" required placeholder="ex : NovaCorp">
      </label>
      <label>Client ID (unique, sans espace)*
        <input type="text" name="clientId" pattern="^[a-zA-Z0-9_-]+$" required placeholder="ex : novacorp">
      </label>
      <label>Couleur principale
        <input type="color" name="color" value="#009688" style="height:32px;width:52px;vertical-align:middle;">
      </label>
      <label>Logo (URL)
        <input type="url" name="logo" placeholder="https://...">
      </label>
      <label>Clé OpenAI API (optionnel)
        <input type="text" name="openaiApiKey" placeholder="sk-...">
      </label>
      <label>Lien RGPD (URL ou page)
        <input type="text" name="rgpdLink" placeholder="/politique-confidentialite.html">
      </label>
      <label>Limite de conversations/mois (optionnel)
        <input type="number" name="maxCalls" min="1" step="1" placeholder="ex : 500">
      </label>
      <div>
        <label>Sujets suggérés (min 1)&nbsp;:</label>
        <div id="suggestions" style="display:flex;flex-direction:column;gap:6px;margin-top:3px;"></div>
        <button type="button" id="addSuggestion" style="margin-top:8px;">+ Ajouter une suggestion</button>
      </div>
      <button type="submit" class="config-submit" style="background:#4349a1;color:#fff;padding:14px 0;font-size:1.11em;border:none;border-radius:10px;cursor:pointer;">Créer la config</button>
      <div id="formStatus" style="margin-top:10px;color:#f55;"></div>
    </form>

    <!-- Zone pour le script à copier -->
    <div id="scriptResult" style="display:none;background:#fff8;padding:20px 14px;border-radius:16px;margin:22px auto 0 auto;max-width:540px;box-shadow:0 2px 20px #181e3640;text-align:center;">
      <h3 style="color:#4349a1;margin-bottom:8px;">Votre script à intégrer</h3>
      <code id="scriptSnippet" style="background:#222;color:#ffd;font-size:1.07em;padding:12px 8px;display:block;border-radius:10px;margin-bottom:12px;text-align:left;white-space:pre-wrap;"></code>
      <button id="copySnippet" style="padding:8px 18px;background:#184588;color:#fff;border:none;border-radius:8px;cursor:pointer;">Copier le script</button>
      <div id="copyMsg" style="color:#13e580;margin-top:8px;display:none;">Script copié !</div>
      <p style="margin-top:12px;font-size:1em;color:#2b2b;">Collez ce code juste avant la balise <b>&lt;/body&gt;</b> de votre site.<br><i>Votre bot vocal est prêt 🚀</i></p>
    </div>
    <!-- ======= FIN FORMULAIRE PRO ======= -->
  </section>

  <!-- OFFRES/PRIX -->
  <section class="offers">
    <h2>Nos offres</h2>
    <div class="offer-cards">
      <div class="offer">
        <h3>Starter</h3>
        <ul>
          <li>Intégration du bot sur votre site</li>
          <li>Jusqu'à 500 conversations/mois</li>
          <li>Personnalisation logo & couleurs</li>
        </ul>
        <p class="price">49 €/mois</p>
      </div>
      <div class="offer">
        <h3>Pro</h3>
        <ul>
          <li>Toutes les options Starter</li>
          <li>Jusqu'à 5 000 conversations/mois</li>
          <li>Accès à la FAQ e-commerce intelligente</li>
          <li>Statistiques détaillées</li>
        </ul>
        <p class="price">149 €/mois</p>
      </div>
      <div class="offer">
        <h3>Sur-mesure</h3>
        <ul>
          <li>Volume & besoins illimités</li>
          <li>Intégration multi-sites</li>
          <li>Fonctionnalités avancées</li>
          <li>Accompagnement personnalisé</li>
        </ul>
        <p class="price">Sur devis</p>
      </div>
    </div>
    <button class="contact-btn">Demander un essai</button>
  </section>

  <!-- FOOTER PRO -->
  <footer class="footer">
    <div class="footer-content">
      <span>© 2025 Novacorp. Tous droits réservés.</span>
      <span>Contact : <a href="mailto:demo@novacorp.com">demo@novacorp.com</a></span>
      <span class="footer-made">Fait avec ❤️ par Diego</span>
    </div>
  </footer>

  <!-- 2. ANCRAGE BOT (bonne pratique, optionnel mais recommandé) -->
  <div id="bot-widget"></div>

  <!-- INTEGRE TON BOT VOCAL SAAS ICI -->
  <script 
    src="https://lovable-ck56.onrender.com/chatbot-standalone
/integration-script-final.js"
    data-client-id="novacorp"
  </script>

  <!-- SwiperJS : la lib + initialisation -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    const swiper = new Swiper('.swiper', {
      loop: true,
      pagination: { el: '.swiper-pagination', clickable: true },
      navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
      keyboard: { enabled: true }
    });
  </script>

  <!-- ========= SCRIPT DU FORMULAIRE PRO (à la fin du body) ========= -->
  <script>
  const backendUrl = "https://chatbot-vocal-backend.onrender.com"; // adapte si tu changes de domaine

  // --- Suggestions dynamiques ---
  const suggestionsDiv = document.getElementById('suggestions');
  const addSuggestionBtn = document.getElementById('addSuggestion');
  let suggestionCount = 0;
  function addSuggestion(value="") {
    if (suggestionCount >= 6) return;
    suggestionCount++;
    const d = document.createElement('div');
    d.style.display = "flex"; d.style.gap = "7px";
    d.innerHTML = `
      <input type="text" required name="suggestion" placeholder="Suggestion..." style="flex:1" value="${value.replace(/"/g,'&quot;')}">
      <button type="button" aria-label="Supprimer" title="Supprimer" style="color:#f33;border:none;background:none;font-size:1.2em;cursor:pointer;">&times;</button>
    `;
    d.querySelector('button').onclick = () => { suggestionsDiv.removeChild(d); suggestionCount--; };
    suggestionsDiv.appendChild(d);
  }
  addSuggestion("Quels sont vos services ?");
  addSuggestion("Je souhaite prendre rendez-vous");

  addSuggestionBtn.onclick = () => addSuggestion("");

  // --- Soumission du formulaire ---
  const form = document.getElementById('configForm');
  const statusDiv = document.getElementById('formStatus');
  const scriptResult = document.getElementById('scriptResult');
  const scriptSnippet = document.getElementById('scriptSnippet');
  const copyBtn = document.getElementById('copySnippet');
  const copyMsg = document.getElementById('copyMsg');

  form.onsubmit = async function(e) {
    e.preventDefault();
    statusDiv.textContent = "";
    scriptResult.style.display = "none";
    // Récupère les valeurs
    const fd = new FormData(form);
    const name = fd.get("name").trim();
    const clientId = fd.get("clientId").trim();
    const color = fd.get("color") || "#009688";
    const openaiApiKey = fd.get("openaiApiKey").trim();
    const logo = fd.get("logo").trim();
    const rgpdLink = fd.get("rgpdLink").trim();
    const maxCalls = fd.get("maxCalls") ? parseInt(fd.get("maxCalls"),10) : undefined;
    // Suggestions
    const suggestions = Array.from(form.querySelectorAll('input[name="suggestion"]'))
      .map(i => i.value.trim()).filter(Boolean);
    if (suggestions.length === 0) {
      statusDiv.textContent = "Ajoutez au moins une suggestion.";
      return;
    }
    // Prépare payload
    const payload = { 
      clientId, name, color, suggestions, 
      logo: logo||undefined, 
      rgpdLink: rgpdLink||undefined, 
      openaiApiKey: openaiApiKey||undefined,
      ...(maxCalls ? {maxCalls} : {})
    };
    // Appel backend
    form.querySelector('button[type=submit]').disabled = true;
    statusDiv.style.color = "#666";
    statusDiv.textContent = "Création de la configuration…";
    try {
      const resp = await fetch(backendUrl + "/api/config", {
        method: "POST",
        headers: { "Content-Type":"application/json" },
        body: JSON.stringify(payload)
      });
      if (resp.status === 409) {
        statusDiv.style.color = "#f22";
        statusDiv.textContent = "Une configuration avec cet ID existe déjà.";
        form.querySelector('button[type=submit]').disabled = false;
        return;
      }
      if (!resp.ok) throw new Error(await resp.text());
      // Affiche le snippet de script à intégrer
        const snippet =
    `<script
      src="https://la-vraiment.onrender.com/integration-script-final.js"
      data-client-id="${clientId}"
      data-backend-url="${backendUrl}"><\/script>`;
      scriptSnippet.textContent = snippet;
      scriptResult.style.display = "block";
      statusDiv.style.color = "#13e580";
      statusDiv.textContent = "✔️ Configuration créée avec succès !";
      // Scroll to snippet
      setTimeout(()=>scriptResult.scrollIntoView({behavior:"smooth"}),150);
      form.reset();
      // Réinitialise suggestions à 2 par défaut
      suggestionsDiv.innerHTML = ""; suggestionCount = 0;
      addSuggestion("Quels sont vos services ?");
      addSuggestion("Je souhaite prendre rendez-vous");
    } catch(err) {
      statusDiv.style.color = "#f22";
      statusDiv.textContent = "Erreur : " + (err.message || err);
      scriptResult.style.display = "none";
    }
    form.querySelector('button[type=submit]').disabled = false;
  };

  // --- Copier le script ---
  copyBtn.onclick = function() {
    navigator.clipboard.writeText(scriptSnippet.textContent).then(()=>{
      copyMsg.style.display = "block";
      setTimeout(()=>{copyMsg.style.display="none";},1600);
    });
  }
  </script>
  <!-- ========= FIN SCRIPT FORMULAIRE PRO ========= -->

</body>
</html>
